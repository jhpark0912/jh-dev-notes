# 2025-06-18 - `www.google.com`에 접속하는 과정

## `www.google.com`를 주소창에 입력

사용자가 `www.google.com`을 주소창에 입력하고 엔터키를 누르게 되면 네트워크 통신 과정이 발생

### 1. URL 분석

- 사용자가 입력한 `www.google.com`은 `URL`이고 이를 HTTP포로토콜을 사용해 `www.google.com`이라는 도메인 이름과 `/`(기본 경로)로 접속하는 것을 파악

### 2. DNS 질의

- 컴퓨터는 `www.google.com`이라는 도메인 이름을 알지 못하며, **IP 주소**로 통신 가능
- **DNS** 서버에 `www.google.com`에 해당하는 IP 주소 검색
    1. 브라우저 캐시 확인: 브라우저가 접속한 기록 있는지 캐시 확인
    2. OS 캐시 확인: 없는 경우 OS의 캐시(hosts 파일 등) 확인
    3. 라우터 캐시 확인: 그래도 없는 경우 공유기(라우터)의 캐시 확인
    4. 로컬 DNS 서버 질의: 모든 곳에 없는 경우 `ISP` 가 제공하는 로컬 DNS 서버에 주소 질의
    5. 재귀/반복 질의: 로컬 DNS 서버에도 없는 경우, 루트 DNS 서버, TLD DNS 서버를 거쳐 `google.com`의 권한이 있는 DNS 서버까지 재귀적, 반복적으로 질의하여 찾음
    6. IP 주소 응답: 해당 과정 중 발견한 `www.google.com`의 IP 주소를 로컬 DNS 서버가 받아 브라우저에 전달

### 3. TCP 3-Way Handshake

- 브라우저가 IP주소로 `TCP 3-Way Handshake` 방식을 이용해 TCP 연결 진행

### 4. HTTP/HTTPS 요청

- TCP 연결이 수립되면, 브라우저는 구글 서버에 웹페이지 데이터를 요청하는 HTTP(혹은 HTTPS) 요청 메시지 전송
- 구성요소는 `요청 라인`, `헤더`, `바디` 를 통해 구성되며, HTTPS인 경우에는 TLS/SSL Handshake 과정으로 암호화 통신채널을 먼저 설정

### 5. 서버의 HTTP/HTTPS 응답

- 구글 서버는 받은 요청을 처리
- 웹 서버는 요청된 리소스를 찾거나, 웹 애플리케이션 서버는 요청을 처리해 동적을 콘텐츠 생성
- 구성 요소는 `상태 라인`, `헤더`, `바디`로 이루어 진다.

### 6. 브라우저의 렌더링

- 서버로부터 받은 응답 메시지를 해석
- HTML 파싱하여 DOM 트리 생성하고, 필요한 리소스에 대해서는 추가 연결을 통해 다운로드를 진행
- CSS 파싱 및 렌더 트리 생성하고 레이아웃 과 페인팅을 진행
- 추가로 `JavaScript`파일이 있는 경우 동적 기능 구현

### 7. 연결 종료 (TCP 4-Way Handshake)

- 데이터 전송이 완료되고 통신이 필요 없는 경우, **4-Way Handshake**를 통해 연결 종료

## 요약

> 브라우저에서 사이트 접속시 이루어지는 과정은 다음과 같음
>
> URL 분석 > DNS 질의 > TCP 3-Way Handshake > HTTP/HTTPS 요청/ 서버 응답 > 브라우저 렌더링 > TCP 4-Way Handshake
