# 2025-06-11 - 공유락과 배타락

## 락이란

- 데이터베이스에서 **락(Lock)**은 여러 사용자가 동시에 데이터 접근 시, 일관성과 무결성을 유지하기 위한 메커니즘
- 문서로 예를 들면 동시 같은 문서 수정시, 한사람이 수정하는 동안 다른 사람이 수정 불가

## 공유락(Shared Lock)

- **공유락**은 데이터를 읽을 때 사용되는 락
- 여러 트랜잭션이 동시에 같은 데이터에 대해 접근 시 공유락 설정을 통한 제어 가능

### 특징

- **읽기 작업 허용**: 공유락이 설정된 데이터는 여러 트랜잭션이 동시에 읽을 수 있음
- **쓰기 작업 제한**: 다른 트랜잭션이 **쓰기(수정, 삭제)** 작업 불가능
- **동시성 증가**: 여러 트랜잭션이 동시에 데이터를 읽을 수 있어 **동시성** 증가

## 배타락(Exclusive Lock)

- **배타락**은 데이터 **변경(쓰기)** 작업 시 사용되는 락
- 한 트랜잭션이 특정 데이터에 배타락 설정하면, 다른 트랜잭션은 해당 데이터에 읽기/쓰기 불가능

### 특징

- **모든 작업 불가**: 배타락이 설정된 데이터는 **읽기 및 쓰기** 작업 모두 차단
- **단일 접근**: 한 트랜잭션만 특정 데이터 배타락 설정 가능
- **데이터 무결성 보장**: 데이터 변경 시 다른 트랜잭션이 접근하지 못하게 하여 무결성 유지

## 공유락 vs 배타락 비교

|구분 | 공유락 (Shared Lock)| 배타락 (Exclusive Lock)
|---|---|---
|목적 | 데이터 읽기| 데이터 변경(쓰기)
|동시성 | 여러 트랜잭션이 동시에 설정 가능 (높음) | 오직 하나의 트랜잭션만 설정 가능 (낮음)
|다른 락 허용? | 다른 공유락 허용 | 다른 어떤 락도 허용 안 함 (공유락, 배타락 모두 차단)
|무결성 | 읽기 작업에 대한 동시성 보장 | 데이터 변경 시의 강력한 무결성 보장

## 요약

> 공유락은 데이터를 읽을 때 사용하며, 여러 트랜잭션이 동시에 읽기 작업을 허용하지만, 쓰기는 차단
> 배타락은 데이터 변경 시 사용하며, 한 트랜잭션이 변경 작업 시에는 다른 트랜잭션은 데이터 접근 불가능하며, 이를 통해 데이터 무결성 보장
> ACID 속성 중 **Isolation**을 보장하기 위한 중요한 메커니즘
